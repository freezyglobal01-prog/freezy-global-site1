<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Freezy Global</title>
<link rel="stylesheet" href="style.css">
<script src="products.js"></script>
<script src="cart.js"></script>
</head>
<body>
<header>
<h1>Admin Panel</h1>
<nav>
<a href="index.html">Home</a>
<a href="services.html">Services</a>
<a href="products.html">Products</a>
<a href="cart.html">Cart</a>
<a href="admin.html">Admin</a>
</nav>
</header>

<section>
<h2>Admin Login</h2>
<input type="password" id="adminPasswordInput" placeholder="Enter password">
<button onclick="loginAdmin()">Login</button>

<div id="adminPanel">
<h2>Manage Products/Services</h2>
<div id="productList"></div>

<h3>Add New Product/Service</h3>
<input type="text" id="newName" placeholder="Name">
<input type="number" id="newPrice" placeholder="Price">
<select id="newType">
  <option value="product">Product</option>
  <option value="service">Service</option>
</select>
<input type="text" id="newImg" placeholder="Image URL">
<button onclick="addProduct()">Add</button>

<h3>Orders</h3>
<div id="orderList"></div>
</div>

<script>
// Secure password in sessionStorage
const defaultPass = "admin123";
if(!sessionStorage.getItem("adminPass")) sessionStorage.setItem("adminPass",defaultPass);

function loginAdmin(){
  const input = document.getElementById("adminPasswordInput").value;
  if(input===sessionStorage.getItem("adminPass")){
    document.getElementById("adminPanel").style.display="block";
    renderProductList();
  } else alert("Wrong password!");
}

// Product management
function renderProductList(){
  const list = document.getElementById("productList");
  list.innerHTML="";
  products.forEach(p=>{
    const div = document.createElement("div");
    div.className="card";
    div.innerHTML=`${p.name} - ₦${p.price} (${p.type}) 
    <button onclick="editProduct(${p.id})">Edit</button>
    <button onclick="removeProduct(${p.id})">Remove</button>`;
    list.appendChild(div);
  });
}

function addProduct(){
  const name = document.getElementById("newName").value;
  const price = parseInt(document.getElementById("newPrice").value);
  const type = document.getElementById("newType").value;
  const img = document.getElementById("newImg").value || "https://via.placeholder.com/250x150";
  if(name && price){
    const id = Math.max(...products.map(p=>p.id))+1;
    products.push({id,name,price,type,img});
    renderProductList();
  }
}

function removeProduct(id){
  const index = products.findIndex(p=>p.id===id);
  if(index>-1){ products.splice(index,1); renderProductList(); }
}

function editProduct(id){
  const p = products.find(p=>p.id===id);
  const newPrice = prompt("Enter new price for "+p.name,p.price);
  if(newPrice){ p.price=parseInt(newPrice); renderProductList(); }
}

// Orders from localStorage (paid only)
function renderOrders(){
  const orders = JSON.parse(localStorage.getItem("orders"))||[];
  const container = document.getElementById("orderList");
  container.innerHTML="";
  orders.forEach(o=>{
    const div = document.createElement("div");
    div.textContent=`Order Ref: ${o.reference}, Amount: ₦${o.amount/100}`;
    container.appendChild(div);
  });
}
renderOrders();
</script>
</section>
</body>
</html>
